if (self.CavalryLogger) { CavalryLogger.start_js(["WqdIM"]); }

__d("SendAPIDialogButton",["Button"],(function(a,b,c,d,e,f){e.exports={monitor:function(a){var c=document.getElementsByName("publish")[0],d="TypeaheadBehaviors";Object.assign(window[d]||(window[d]={}),{SendAPIDialogButtonActivate:function(d){d.subscribe("select",function(){b("Button").setEnabled(c,1)}),d.subscribe("blur",function(){var d=a.getTokenValues();b("Button").setEnabled(c,d&&d.length)})}})}}}),null);
__d("GamesCollectionPrivacyController",["Arbiter","AsyncRequest","DOM","SelectorDeprecated"],(function(a,b,c,d,e,f){function a(a,c,d){this._collection_item_id=a,this._data_name=c,this._elem=d,this._handler=b("Arbiter").subscribe(["AudienceSelector/changed","AudienceSelector/update"],this.updateIcon.bind(this))}Object.assign(a.prototype,{updateIcon:function(event,a){this._data_name==a.selector.getAttribute("data-name")&&new(b("AsyncRequest"))("/ajax/timeline/app_collection_item/game_played_privacy/update").setData({collection_item_id:this._collection_item_id,privacy_value:b("SelectorDeprecated").getOptionValue(a.option)}).setHandler(function(a){b("Arbiter").unsubscribe(this._handler),b("DOM").replace(this._elem,a.payload.privacy_xhp)}.bind(this)).send()}});e.exports=a}),null);
__d("legacy:connect-xd",["XD"],(function(a,b,c,d,e,f){a.UnverifiedXD=b("XD").UnverifiedXD,a.XD=b("XD").XD}),3);
__d("PlatformDialogOauthWrite",["Arbiter","PrivacyConst","SelectorDeprecated"],(function(a,b,c,d,e,f){a={subscribeAudienceText:function(a,c,d){b("Arbiter").subscribe("platform/privacy/app-audience",function(b,e){a.show(c[e]||d)}),b("Arbiter").subscribe("AudienceSelector/changed",function(e,f){e=b("SelectorDeprecated").getOptionValue(f.option);e!=b("PrivacyConst").BaseValue.CUSTOM&&a.show(c[e]||d)}),b("Arbiter").subscribe("CustomPrivacyOptionController/update",function(e,f){a.show(c[b("SelectorDeprecated").getOptionValue(f.option)]||d)})}};e.exports=a}),null);
__d("PlatformDialogStack",["CSS","ge"],(function(a,b,c,d,e,f){__p&&__p();function a(a,b){this._root=a,this._showing=b}Object.assign(a.prototype,{getRoot:function(){return this._root},getShowing:function(){return this._showing},show:function(a){Array.from(this._root.childNodes).forEach(b("CSS").hide,b("CSS"));b("CSS").show(b("ge")(a,this._root));this._showing=a;return this}});e.exports=a}),null);
__d("LitestandLinkHider",["DataStore","DOMQuery","Event","Parent","UserAgent_DEPRECATED"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(event){var a=event.getTarget();a=b("Parent").byTag(a,"a");if(!(a instanceof HTMLAnchorElement))return;event.type==="mouseover"?(b("DataStore").set(a,"href",a.href),a.removeAttribute("href")):(a.href=b("DataStore").get(a,"href")||a.href,event.type==="mouseout"&&b("DataStore").remove(a,"href"))}var h={hideLinks:function(a){(b("UserAgent_DEPRECATED").chrome()||b("UserAgent_DEPRECATED").ie()>=9||b("UserAgent_DEPRECATED").opera())&&b("Event").listen(a,{mouseover:g,mouseout:g,mousedown:g})},removeAllHrefs:function(a,c){__p&&__p();c===void 0&&(c=null);a=b("DOMQuery").scry(a,"a");a.forEach(function(a){if(c&&c.length&&c.some(function(b){return a.hasAttribute(b)}))return;a.removeAttribute("href");a.removeAttribute("ajaxify");a.removeAttribute("rel");a.setAttribute("tabindex",0)})},removeClickable:function(a,c){h.removeAllHrefs(a);a=b("DOMQuery").scry(a,"."+c+" a");a.forEach(function(a){a.removeAttribute("onclick"),a.removeAttribute("onmouseover")})}};e.exports=h}),null);
__d("TagTypeaheadView",["AsyncRequest","ContextualTypeaheadView","CSS","DOM","FamilyTaggingConfig","Parent"],(function(a,b,c,d,e,f){__p&&__p();var g;c=babelHelpers.inherits(a,b("ContextualTypeaheadView"));g=c&&c.prototype;function a(a,b){"use strict";g.constructor.call(this,a,b),this.hintText=b.hintText,this.userEd=b.userEd,this.origAutoSelect=b.autoSelect,this.setSuggestions(b.suggestions)}a.prototype.init=function(){"use strict";b("CSS").addClass(this.element,"uiTagTypeaheadView"),g.init.call(this)};a.prototype.buildResults=function(a){"use strict";__p&&__p();!this.value&&this.hintText&&a.unshift({subtext:this.hintText,type:"hintText"});this.userEd&&(new(b("AsyncRequest"))().setURI("/ajax/fof/user_education.php").setData({increment:1}).send(),a.unshift({subtext:this.userEd,type:"userEdText"}));if(b("FamilyTaggingConfig").gk){var c=[],d=[];for(var e=0;e<a.length;e++)a[e].type!=="family_tags"&&a[e].index!=-1e3&&a[e].type!=="hintText"?c.push(a[e]):d.push(a[e]);a=d.concat(c);g.updateResults.call(this,a)}e=g.buildResults.call(this,a);this.userEd&&a.shift();this.value||a.shift();return e};a.prototype.show=function(){"use strict";var a=b("DOM").scry(this.context,".typeaheadBackdrop");a.length>0&&b("CSS").addClass(a[0],"resultsPresent");return g.show.call(this)};a.prototype.hide=function(){"use strict";var a=b("DOM").scry(this.context,".typeaheadBackdrop");a.length>0&&b("CSS").removeClass(a[0],"resultsPresent");return g.hide.call(this)};a.prototype.render=function(a,b,c){"use strict";this.autoSelect=this.origAutoSelect&&a.length,this.disableAutoSelect=a.length===0,b=b.concat(this.getAdditionalResults()),g.render.call(this,a,b,c)};a.prototype.getItems=function(){"use strict";var a=g.getItems.call(this);this.value||a.shift();this.userEd&&a.shift();return a};a.prototype.getSuggestions=function(){"use strict";return this.suggestions};a.prototype.setSuggestions=function(a){"use strict";this.suggestions=a?a.map(String):[],this.visible=!!this.suggestions.length};a.prototype.addSuggestion=function(a){"use strict";this.suggestions.unshift(a)};a.prototype.addTypeaheadFlip=function(a){"use strict";b("CSS").addClass(this.element,a)};a.prototype.removeTypeaheadFlip=function(a){"use strict";b("CSS").removeClass(this.element,a)};a.prototype.getContext=function(){"use strict";var a=b("Parent").byClass(this.element,"typeaheadContainer");if(a)return a;else return g.getContext.call(this)};a.prototype.getAdditionalResults=function(){"use strict";return[]};e.exports=a}),null);
__d("DisablePlatformButton",["CSS","Event","ge"],(function(a,b,c,d,e,f){__p&&__p();var g=!1;a={init:function(a){__p&&__p();for(var c=0;c<a.length;c++){var d=b("ge")(a[c]);b("Event").listen(d,"click",function(c){if(g)return!1;else{g=!0;for(var c=0;c<a.length;c++)b("CSS").addClass(a[c],"uiButtonDisabled")}})}}};e.exports=a}),null);
__d("legacy:AudienceSelector",["AudienceSelector"],(function(a,b,c,d,e,f){b("AudienceSelector")}),3);
__d("FriendListPrivacyOptions",["Arbiter","AsyncDialog","AsyncRequest","DOMQuery","PageTransitions","Parent","SelectorDeprecated","$","ge","nullthrows"],(function(a,b,c,d,e,f){__p&&__p();var g=!1,h=!1,i=null,j={},k=function(a){__p&&__p();Object.keys(j).length||b("PageTransitions").registerHandler(function(){j={},g=!1,h=!1});var c=a.getAttribute("data-name");j[c]=a;b("SelectorDeprecated").listen(a,"select",function(a){a=a.option;var c=b("DOMQuery").find(a,"a.itemAnchor"),d=c.getAttribute("data-flid");if(!d)return;c=c.getAttribute("data-dynamic");c&&g?l.showSmartListNux(a,d):!c&&h&&l.showDumbListNux([d])})},l={listen:function(a,c,d){a=b("ge")(a);if(!a)return;a=b("Parent").byClass(a,"audienceSelector");a&&(k(a),g=c,h=d)},showSmartListNux:function(a,c){a=b("$")(a);new(b("AsyncRequest"))("/ajax/friends/lists/smart_list_publish_nux.php").setData({option_id:a.id,flid:c}).send();g=!1},setContextualDialog:function(a,c){__p&&__p();c=b("$")(c);c=b("Parent").byClass(c,"audienceSelector");if(c){a.setContext(c);a.show();var d=b("Arbiter").subscribe("composer/publish",function(){a.hide()});a.subscribe("hide",function(){d.unsubscribe()})}},showDumbListNux:function(a){b("AsyncDialog").send(new(b("AsyncRequest"))("/ajax/friends/lists/dumb_list_publish_nux.php").setData({flids:a})),h=!1},showBothListsNux:function(a,c){i=b("$")(a),l.showDumbListNux(c)},setDialogX:function(a){if(!i)return;a.subscribe("hide",function(){l.showSmartListNux(b("nullthrows")(i)),i=null})}};e.exports=l}),null);
__d("ProgressiveDatepicker",["Arbiter","ArbiterMixin","CSS","DataStore","DOM","Event","Focus","Parent","getElementText","mixin","shield"],(function(a,b,c,d,e,f){__p&&__p();var g;function h(a){return new Date(a[0],a[1],a[2],a[3],a[4])}function i(a,c){while(a.length)b("DOM").insertAfter(c,a.pop())}a=babelHelpers.inherits(j,b("mixin")(b("ArbiterMixin")));g=a&&a.prototype;function j(a,c){"use strict";__p&&__p();g.constructor.call(this);this._root=a;this._savedLabels={};this._savedPeriodsBack=[];this._savedPeriodsFront=[];this._menus={};this._dayOrderAscending=c.dayorderascending;var d=0;c.gmtoffset!==undefined&&(d=-new Date().getTimezoneOffset()-c.gmtoffset);this._mintime=c.mintime&&new Date(1e3*c.mintime-d*6e4);this._maxtime=c.maxtime&&new Date(1e3*c.maxtime-d*6e4);b("DataStore").set(a,"datepicker",this);b("DOM").scry(a,"select").forEach(function(a){b("Event").listen(a,"change",b("shield")(this._handleChange,this,a));var c=b("Parent").byClass(a,"period");b("Event").listen(a,"focus",b("CSS").addClass.bind(null,c,"periodFocus"));b("Event").listen(a,"blur",b("CSS").removeClass.bind(null,c,"periodFocus"));this._setMenuSelectionState(a);a.getAttribute("data-name")==="month"&&this._filterInvalidDates()}.bind(this));b("DOM").scry(a,"a.periodLabel").forEach(function(a){var c=b("Parent").byClass(a,"period");b("Event").listen(a,"click",function(){b("CSS").addClass(c,"periodSelected"),b("CSS").addClass(c,"periodFocus"),b("Focus").set(b("DOM").find(c,"select"))})});this._filterInvalidDates();this.inform("initialized",this,b("Arbiter").BEHAVIOR_STATE)}j.prototype.setDate=function(a,b,c,d,e){"use strict";this._addSavedPeriods();var f=j.PERIODS;for(var g=0;g<f.length;g++)this._setValueForPeriod(f[g],arguments[g]);this._filterInvalidDates();this.inform("changed")};j.prototype.setDateWithTimestamp=function(a){"use strict";a=new Date(a);this.setDate(a.getFullYear(),a.getMonth()+1,a.getDate(),a.getHours(),a.getMinutes())};j.prototype.isSet=function(){"use strict";var a=j.PERIODS;for(var b=0;b<a.length;b++)if(this._getValueForPeriod(a[b]))return!0;return!1};j.prototype.getRoot=function(){"use strict";return this._root};j.prototype.getValues=function(){"use strict";var a=j.PERIODS,b={};for(var c=0;c<a.length;c++){var d=this._getValueForPeriod(a[c]);d&&(b[a[c]]=d)}return b};j.prototype.getDate=function(){"use strict";var a=this.getValues();return new Date(a.year||0,(a.month||1)-1,a.day||1,a.hour||0,a.minute||0)};j.prototype.getTimestamp=function(){"use strict";return Math.round(this.getDate().getTime()/1e3)};j.prototype._setValueForPeriod=function(a,b){"use strict";__p&&__p();a=this._menuForPeriodName(a);if(!a)return;b===undefined&&(b="");var c=a.options;for(var d=0,e=c.length;d<e;d++)if(c[d].value==b){a.selectedIndex=d;break}this._setMenuSelectionState(a)};j.prototype._getValueForPeriod=function(a){"use strict";a=this._menuForPeriodName(a);return a&&a.options[a.selectedIndex].value};j.prototype._handleChange=function(a){"use strict";this._setMenuSelectionState(a),this._filterInvalidDates(),this.inform("changed")};j.prototype._setMenuSelectionState=function(a){"use strict";__p&&__p();var c=b("Parent").byClass(a,"period");if(!c)return;b("CSS").hasClass(c,"periodRequired")?a.selectedIndex===0&&(a.selectedIndex=1):this._updateLabel(a);var d=a.getAttribute("data-name");a=a.options[a.selectedIndex].value;b("CSS").conditionClass(c,"periodSelected",a);b("CSS").conditionClass(this._root,this._selectedClass(d),a);a||this._resetMenu(j.PERIODS.indexOf(d)+1)};j.prototype._updateLabel=function(a){"use strict";var c=a.getAttribute("data-name"),d=a.options[0];this._savedLabels[c]||(this._savedLabels[c]=b("getElementText")(d));a.selectedIndex===0?b("DOM").setContent(d,this._savedLabels[c]):b("DOM").setContent(d,"--")};j.prototype._daysInMonth=function(a,b){"use strict";return new Date(a||1999,b+1||1,0).getDate()};j.prototype._daysInCurrentMonth=function(){"use strict";return this._daysInMonth(this._getValueForPeriod("year"),this._getValueForPeriod("month")-1)};j.prototype._menuForPeriodName=function(a){"use strict";this._menus[a]||(this._menus[a]=b("DOM").scry(this._root,"."+a+"Menu")[0]);return this._menus[a]};j.prototype._selectedClass=function(a){"use strict";return"uiProgressiveDatepickerSelected-"+a};j.prototype._resetMenu=function(a){"use strict";var c=j.PERIODS;for(;a<c.length;a++){var d=c[a],e=this._menuForPeriodName(d);if(!e)return;b("Parent").byClass(e,"periodRequired")?e.selectedIndex=1:(b("CSS").removeClass(b("Parent").byClass(e,"period"),"periodSelected"),b("CSS").removeClass(this._root,this._selectedClass(d)),e.selectedIndex=0,this._updateLabel(e))}};j.prototype._addSavedPeriods=function(){"use strict";__p&&__p();var a=j.PERIODS;for(var b=0;b<a.length;b++){var c=this._menuForPeriodName(a[b]);if(!c)return;this._savedPeriodsFront[b]||(this._savedPeriodsFront[b]=[]);this._savedPeriodsBack[b]||(this._savedPeriodsBack[b]=[]);var d=c.options[0];c=c.options[c.options.length-1];b===j.PERIODS.indexOf("hour")||b===j.PERIODS.indexOf("minute")||b===j.PERIODS.indexOf("day")&&this._dayOrderAscending?(i(this._savedPeriodsFront[b],d),i(this._savedPeriodsBack[b],c)):(i(this._savedPeriodsBack[b],d),i(this._savedPeriodsFront[b],c))}};j.prototype._filterInvalidDates=function(){"use strict";__p&&__p();this._addSavedPeriods();var a=j.PERIODS,c=this.getValues();for(var d=0;d<a.length;d++){var e=this._menuForPeriodName(a[d]);if(!e)return;this._savedPeriodsFront[d]||(this._savedPeriodsFront[d]=[]);this._savedPeriodsBack[d]||(this._savedPeriodsBack[d]=[]);for(var f=1;f<e.options.length;){var g=e.options[f],i=[d-1>=0?c[a[0]]:0,d-1>=1?c[a[1]]-1:0,d-1>=2?c[a[2]]:1,d-1>=3?c[a[3]]:0,d-1>=4?c[a[4]]:0];i[d]=g.value;d===j.PERIODS.indexOf("month")&&(i[d]=i[d]-1);i=h(i);var k=[d-1>=0?c[a[0]]:9001,d-1>=1?c[a[1]]-1:11,d-1>=2?c[a[2]]:this._daysInCurrentMonth(),d-1>=3?c[a[3]]:23,d-1>=4?c[a[4]]:59];k[d]=g.value;d===j.PERIODS.indexOf("month")&&(k[d]--,k[d+1]=this._daysInMonth(k[0],k[1]));k=h(k);i=i>this._maxtime;k=k<this._mintime;var l=d===j.PERIODS.indexOf("day")&&g.value>this._daysInCurrentMonth();k||i||l?(g.selected&&(g.selected=!1,this._resetMenu(d)),b("DOM").remove(g),i||l?this._savedPeriodsBack[d].push(g):this._savedPeriodsFront[d].push(g)):f++}}};j.getInstance=function(a){"use strict";return a?b("DataStore").get(a,"datepicker"):null};Object.assign(j,{PERIODS:["year","month","day","hour","minute"]});e.exports=j}),null);
__d("FreeformTokenizerBehavior",["Event","Input","Keys"],(function(a,b,c,d,e,f){__p&&__p();function a(a,c){__p&&__p();var d=c.matcher&&new RegExp(c.matcher,"i"),e=c.splitter&&new RegExp(c.splitter),f=c.tokenize_on_blur!==!1,g=c.tokenize_on_paste!==!1,h=c.split_on_check===!0,i=c.select_on_comma!==!1,j=c.select_on_space===!0,k=c.never_submit===!0;function l(event){__p&&__p();var c=b("Input").getValue(a.getInput()).trim();e&&event&&event.type=="paste"?c=c.split(e):e&&h?c=c.split(e):c=[c];var f=!1;for(var g=0;g<c.length;g++){var i=c[g].trim();if(i&&(!d||d.test(i))){i={uid:i,text:i,freeform:!0};a.addToken(a.createToken(i));f=!0}}event&&f&&(a.getTypeahead().getCore().afterSelect(),event.kill())}a.subscribe("keydown",function(c,d){var event=d.event;c=b("Event").getKeyCode(event);if(c==b("Keys").RETURN||i&&c==b("Keys").COMMA||j&&c==b("Keys").SPACE){d=a.getTypeahead().getView();d.getSelection()?(d.select(),event.kill()):l(event)}c==b("Keys").RETURN&&k&&event.kill()});a.subscribe("paste",function(a,b){g&&setTimeout(l.bind(null,b.event),20)});a.subscribe("blur",function(b,c){f&&l(),a.getTypeahead().getCore().reset()})}e.exports=a}),null);
__d("TypeaheadHintText",["emptyFunction"],(function(a,b,c,d,e,f){function a(a){"use strict";this._typeahead=a}a.prototype.enable=function(){"use strict";this._typeahead.getCore().resetOnKeyup=!1};Object.assign(a.prototype,{disable:b("emptyFunction")});e.exports=a}),null);
__d("legacy:HintTextTypeaheadBehavior",["TypeaheadHintText"],(function(a,b,c,d,e,f){a.TypeaheadBehaviors||(a.TypeaheadBehaviors={}),a.TypeaheadBehaviors.hintText=function(a){a.enableBehavior(b("TypeaheadHintText"))}}),3);
__d("legacy:xd-arbiter",["XdArbiter"],(function(a,b,c,d,e,f){b("XdArbiter")}),3);